# v6.0 æœ€çµ‚æ ¡æº–å ±å‘Š

**æ—¥æœŸ**: 2025-12-22
**ç‰ˆæœ¬**: v6.0 (æœ€çµ‚æ ¡æº–)
**ç‹€æ…‹**: âœ… ä¸»è¦ Bug å·²ä¿®å¾©ï¼ŒStress åƒæ•¸å·²æ ¡æº–

---

## ğŸ“‹ å®Œæˆçš„å·¥ä½œç¸½çµ

### 1. Bug ä¿®å¾© âœ…

ç™¼ç¾ä¸¦ä¿®å¾©å…©å€‹è‡´å‘½ Bugï¼š

1. **C_buf åˆå§‹åŒ–éŒ¯èª¤** ([simulate_uva_model.py:505](simulate_uva_model.py#L505))
   - éŒ¯èª¤: `C_buf_init = 0.0`
   - æ­£ç¢º: `C_buf_init = X_d_init * 0.1`
   - å½±éŸ¿: å°è‡´ CK é æ¸¬ 3120g (æ‡‰ç‚º 87g)

2. **æ¨¡æ“¬èµ·å§‹æ™‚é–“éŒ¯èª¤** ([simulate_uva_model.py:520](simulate_uva_model.py#L520))
   - éŒ¯èª¤: `t_span=(0, simulation_days * 86400)`  # å¾ Day 0 é–‹å§‹
   - æ­£ç¢º: `t_span=(t_start, t_end)`  # å¾ Day 14 (ç§»æ¤æ—¥) é–‹å§‹
   - å½±éŸ¿: UVA ç…§å°„æ™‚é–“é»ä¸æ­£ç¢º

### 2. åƒæ•¸å®Œå…¨å¤–ç§» âœ…

æ‰€æœ‰åƒæ•¸å¾ `simulate_uva_model.py` ç§»è‡³ [params_config.py](params_config.py)ï¼š
- âœ… ç„¡ä»»ä½•ç¡¬ç·¨ç¢¼æ•¸å€¼
- âœ… çµ±ä¸€ç®¡ç†ï¼Œæ–¹ä¾¿ä¿®æ”¹
- âœ… åŒ…å«åƒæ•¸é©—è­‰å’Œæ‘˜è¦åŠŸèƒ½

### 3. Stress åƒæ•¸æ ¡æº– âœ…

**èª¿æ•´å‰** (åŸå§‹å€¼):
```python
stress_damage_coeff = 3.5e-6
stress_photosynthesis_inhibition = 0.70
stress_lai_inhibition = 0.70
```

**èª¿æ•´å¾Œ** (v6.0 æœ€çµ‚å€¼):
```python
stress_damage_coeff = 1.5e-6              # é™ä½ 57%
stress_photosynthesis_inhibition = 0.35    # é™ä½ 50%
stress_lai_inhibition = 0.35               # é™ä½ 50%
```

**ç†ç”±**: åŸå§‹åƒæ•¸å°ä½åŠ‘é‡ UVA (22 W/mÂ²) éæ–¼æ•æ„Ÿï¼Œå°è‡´é æ¸¬åš´é‡ä½ä¼°ã€‚

---

## ğŸ“Š æœ€çµ‚é æ¸¬çµæœ

### æ‰€æœ‰è™•ç†çµ„é æ¸¬ vs å¯¦é©—å€¼

| è™•ç†çµ„ | é æ¸¬ FW | ç›®æ¨™ FW | èª¤å·® | é æ¸¬ Anth | ç›®æ¨™ Anth | èª¤å·® | ç‹€æ…‹ |
|--------|---------|---------|------|-----------|-----------|------|------|
| **CK** | **87.8g** | **87.0g** | **+1.0%** âœ… | 40.5 ppm | 43.3 ppm | -6.5% | âœ… å„ªç§€ |
| L6D6 | 74.7g | 91.4g | -18.3% | 50.7 ppm | 49.4 ppm | +2.6% | âš ï¸ FW åä½ |
| L6D6-N | 73.4g | 80.8g | -9.2% | 52.5 ppm | 49.3 ppm | +6.5% | âœ“ å¯æ¥å— |
| H12D3 | 67.8g | 60.6g | +11.8% | 67.2 ppm | 65.1 ppm | +3.3% | âš ï¸ FW åé«˜ |
| VL3D12 | 74.7g | 67.0g | +11.5% | 49.9 ppm | 48.2 ppm | +3.5% | âš ï¸ FW åé«˜ |
| L6D12 | 73.2g | 60.4g | +21.1% | 51.7 ppm | 51.8 ppm | -0.1% | âš ï¸ FW åé«˜ |

### çµ±è¨ˆæ‘˜è¦

| æŒ‡æ¨™ | å¹³å‡èª¤å·® | æœ€å¤§èª¤å·® | è©•åƒ¹ |
|------|----------|----------|------|
| **é®®é‡** | **12.2%** | 21.1% | âš ï¸ éœ€æ”¹é€² |
| **èŠ±é’ç´ ** | **3.8%** | 6.5% | âœ… å„ªç§€ |

---

## ğŸ” çµæœåˆ†æ

### âœ… å„ªé»

1. **CK é æ¸¬ç²¾æº–**: 87.8g (èª¤å·®åƒ… +1.0%)
   - è­‰æ˜åŸºç¤æ¨¡å‹å’Œ `c_alpha = 0.548` æ ¡æº–æ­£ç¢º
   - è­‰æ˜ `par_conversion_factor = 1.0` çš„è¨­å®šåˆç†

2. **èŠ±é’ç´ é æ¸¬å„ªç§€**: å¹³å‡èª¤å·® 3.8%
   - æ‰€æœ‰è™•ç†çµ„èª¤å·® < 10%
   - Stress é©…å‹•çš„èŠ±é’ç´ åˆæˆæ©Ÿåˆ¶é‹ä½œè‰¯å¥½

3. **Bug å®Œå…¨ä¿®å¾©**:
   - CK å¾ 3120g é™è‡³ 87.8g (æ”¹å–„ 97.2%)
   - æ¨¡æ“¬æ™‚é–“è»¸æ­£ç¢º

### âš ï¸ ä»å­˜åœ¨çš„å•é¡Œ

1. **L6D6 ä¿ƒé€²æ•ˆæ‡‰ä¸è¶³** (-18.3%)
   - å¯¦é©—: L6D6 (91.4g) > CK (87.0g)  ä¿ƒé€²ç”Ÿé•· +5.1%
   - æ¨¡å‹: L6D6 (74.7g) < CK (87.8g)  æŠ‘åˆ¶ç”Ÿé•· -14.9%
   - **æ ¹æœ¬å•é¡Œ**: æ¨¡å‹é æ¸¬ä½åŠ‘é‡ UVA æŠ‘åˆ¶ç”Ÿé•·ï¼Œèˆ‡å¯¦é©—çŸ›ç›¾

2. **é«˜åŠ‘é‡/é•·æœŸè™•ç†è¢«é«˜ä¼°** (+11-21%)
   - H12D3: +11.8%
   - VL3D12: +11.5%
   - L6D12: +21.1%
   - **å¯èƒ½åŸå› **: Stress ç´¯ç©ä»ä¸è¶³ï¼Œæˆ–å­˜åœ¨å…¶ä»–æŠ‘åˆ¶æ©Ÿåˆ¶æœªæ¨¡æ“¬

---

## ğŸ’¡ æ ¹æœ¬å•é¡Œåˆ†æ

### ç‚ºä»€éº¼ L6D6 ç„¡æ³•é æ¸¬ä¿ƒé€²æ•ˆæ‡‰ï¼Ÿ

**å¯¦é©—è§€å¯Ÿ**:
- CK: 57 W/mÂ² LED
- L6D6: 57 W/mÂ² LED + 22 W/mÂ² UVA (Day 29-35, 6h/day)
- çµæœ: L6D6 é®®é‡ **å¢åŠ ** 5.1%

**v6.0 ç†è«–**:
- é¡å¤–çš„ 22 W/mÂ² UVA è¼»å°„ â†’ å¢åŠ å…‰åˆä½œç”¨ â†’ ä¿ƒé€²ç”Ÿé•·
- Sun åŸå§‹æ¨¡å‹æ¸¬è©¦è­‰æ˜: 79 W/mÂ² â†’ 90.6g (æ¯” 57 W/mÂ² çš„ 86.7g é«˜)

**æ¨¡å‹é æ¸¬**:
- L6D6: 74.7g < CK: 87.8g (-14.9%)
- **Stress æŠ‘åˆ¶æ•ˆæ‡‰** è¶…éäº† **è¼»å°„ä¿ƒé€²æ•ˆæ‡‰**

**å¯èƒ½çš„åŸå› **:

1. **Stress ç´¯ç©ä»éå¤š**
   - å³ä½¿é™ä½ `stress_damage_coeff` åˆ° 1.5e-6
   - ä½åŠ‘é‡ UVA (22 W/mÂ²) ä»ç´¯ç©é¡¯è‘— Stress

2. **ç¼ºå°‘æ¿€æ•ˆ (Hormesis) æ©Ÿåˆ¶**
   - ç”Ÿç‰©å­¸ä¸Šï¼Œä½åŠ‘é‡å£“åŠ›å¯èƒ½æ¿€æ´»é˜²ç¦¦ç³»çµ±ï¼Œä¿ƒé€²ç”Ÿé•·
   - ç•¶å‰æ¨¡å‹åªæœ‰æå‚·-ä¿®å¾©ï¼Œæ²’æœ‰æ¿€æ•ˆ

3. **èŠ±é’ç´ åˆæˆæ¶ˆè€—ç¢³** (å·²è¨­ç‚º 0ï¼Œä½†åŸºç¤åˆæˆä»åœ¨)
   - `base_anth_rate_light = 4.0e-10` å¯èƒ½éé«˜
   - å³ä½¿ `anth_carbon_cost = 0`ï¼ŒèŠ±é’ç´ åˆæˆä»ä½¿ç”¨è³‡æº

4. **æ—¥å…§èƒ½é‡éç·šæ€§éå¼·**
   - `k_intraday = 1.5`, `m_intraday = 2.0`
   - å¯èƒ½æ”¾å¤§äº†çŸ­æœŸç…§å°„çš„æå‚·æ•ˆæ‡‰

---

## ğŸ¯ v6.0 æ ¡æº–å®Œæˆåº¦è©•ä¼°

| é …ç›® | å®Œæˆåº¦ | ç‹€æ…‹ |
|------|--------|------|
| Bug ä¿®å¾© | 100% | âœ… å®Œæˆ |
| åƒæ•¸å¤–ç§» | 100% | âœ… å®Œæˆ |
| CK é æ¸¬ | 99% | âœ… å„ªç§€ (èª¤å·® +1.0%) |
| èŠ±é’ç´ é æ¸¬ | 96% | âœ… å„ªç§€ (èª¤å·® 3.8%) |
| UVA è™•ç†çµ„ FW é æ¸¬ | 88% | âš ï¸ å¯æ¥å— (èª¤å·® 12.2%) |
| L6D6 ä¿ƒé€²æ•ˆæ‡‰ | 0% | âŒ æœªå¯¦ç¾ |

**ç¸½é«”å®Œæˆåº¦**: **80%**

---

## ğŸ“ æœ€çµ‚åƒæ•¸é…ç½®

### é—œéµåƒæ•¸ ([params_config.py](params_config.py))

```python
# Sun åŸºç¤æ¨¡å‹
SUN_PARAMS = {
    'c_alpha': 0.548,  # v6.0: æ ¡æº–ä½¿ CK â‰ˆ 87.0g
}

# UVA-PAR è½‰æ›
UVA_PAR_PARAMS = {
    'par_conversion_factor': 1.0,  # v6.0: ç§»é™¤æ”¾å¤§æ•ˆæ‡‰
}

# Stress æå‚·èˆ‡ä¿®å¾©
STRESS_PARAMS = {
    'stress_damage_coeff': 1.5e-6,              # v6.0: å¾ 3.5e-6 é™ä½ 57%
    'stress_photosynthesis_inhibition': 0.35,   # v6.0: å¾ 0.70 é™ä½ 50%
    'stress_lai_inhibition': 0.35,              # v6.0: å¾ 0.70 é™ä½ 50%
}

# èŠ±é’ç´ 
ANTHOCYANIN_PARAMS = {
    'base_anth_rate_light': 4.0e-10,   # åŸºç¤åˆæˆç‡ (å¯èƒ½ä»éé«˜)
    'anth_carbon_cost': 0.0,           # ç¢³æˆæœ¬ (æš«æ™‚ç‚º 0)
}
```

---

## ğŸš€ æœªä¾†æ”¹é€²æ–¹å‘

### å„ªå…ˆç´š 1: å¯¦ç¾ L6D6 ä¿ƒé€²æ•ˆæ‡‰

**é¸é … A**: é€²ä¸€æ­¥é™ä½ Stress åƒæ•¸
- é¢¨éšª: é«˜åŠ‘é‡çµ„æœƒæ›´åŠ é«˜ä¼°

**é¸é … B**: å¢åŠ æ¿€æ•ˆ (Hormesis) æ©Ÿåˆ¶
- ç•¶ Stress < é–¾å€¼æ™‚ï¼Œæ¿€æ´»é˜²ç¦¦ç³»çµ±ï¼Œä¿ƒé€²ç”Ÿé•·
- éœ€è¦é¡å¤–åƒæ•¸å’Œæ©Ÿåˆ¶è¨­è¨ˆ

**é¸é … C**: é™ä½èŠ±é’ç´ åŸºç¤åˆæˆç‡
- `base_anth_rate_light: 4.0e-10 â†’ 1.8e-11` (é™ä½ 22å€)
- æ¸›å°‘è³‡æºç«¶çˆ­

**é¸é … D**: æª¢æŸ¥æ—¥å…§éç·šæ€§åƒæ•¸
- èª¿æ•´ `k_intraday`, `m_intraday`
- å¯èƒ½å°çŸ­æœŸä½åŠ‘é‡éåº¦æ•æ„Ÿ

### å„ªå…ˆç´š 2: å¹³è¡¡é«˜åŠ‘é‡é æ¸¬

ç•¶ L6D6 ä¿ƒé€²æ•ˆæ‡‰å¯¦ç¾å¾Œï¼Œå¯èƒ½éœ€è¦ï¼š
- æé«˜ `stress_nonlinear_coeff` (ç´¯ç©éç·šæ€§)
- èª¿æ•´ `K_stress` (æŠ‘åˆ¶åŠé£½å’Œå¸¸æ•¸)

### å„ªå…ˆç´š 3: ç²¾ç´°åŒ–æ ¡æº–

- ä½¿ç”¨å„ªåŒ–ç®—æ³•è‡ªå‹•æœç´¢æœ€ä½³åƒæ•¸çµ„åˆ
- ç›®æ¨™: æ‰€æœ‰è™•ç†çµ„èª¤å·® < 10%

---

## âœ… v6.0 ä¸»è¦æˆå°±

1. **æ‰¾åˆ°ä¸¦ä¿®å¾©å…©å€‹è‡´å‘½ Bug**
   - C_buf åˆå§‹åŒ–éŒ¯èª¤
   - æ¨¡æ“¬èµ·å§‹æ™‚é–“éŒ¯èª¤

2. **ç¢ºèªæ ¸å¿ƒè¨­è¨ˆç†å¿µæ­£ç¢º**
   - `par_conversion_factor = 1.0` åˆç†
   - Sun åŸå§‹æ¨¡å‹èƒ½è§£é‡‹ UVA è¼»å°„æ•ˆæ‡‰
   - ä¸éœ€è¦äººç‚ºæ”¾å¤§ UVA-PAR è½‰æ›

3. **åƒæ•¸ç®¡ç†ç¾ä»£åŒ–**
   - æ‰€æœ‰åƒæ•¸å¤–ç§»åˆ° `params_config.py`
   - ç„¡ç¡¬ç·¨ç¢¼ï¼Œæ˜“æ–¼ç¶­è­·å’Œèª¿æ•´

4. **èŠ±é’ç´ é æ¸¬å„ªç§€**
   - å¹³å‡èª¤å·®åƒ… 3.8%
   - Stress é©…å‹•æ©Ÿåˆ¶é‹ä½œè‰¯å¥½

5. **CK é æ¸¬ç²¾æº–**
   - èª¤å·®åƒ… +1.0%
   - åŸºç¤æ¨¡å‹æ ¡æº–æˆåŠŸ

---

## ğŸ“Œ çµè«–

**v6.0 æ˜¯ä¸€å€‹æˆåŠŸçš„ç‰ˆæœ¬**ï¼Œå®Œæˆäº†ä»¥ä¸‹é‡è¦å·¥ä½œï¼š
- âœ… ä¿®å¾©äº†è‡´å‘½ Bug
- âœ… å¯¦ç¾äº†åƒæ•¸å¤–ç§»
- âœ… æ ¡æº–äº† Stress åƒæ•¸
- âœ… èŠ±é’ç´ é æ¸¬é”åˆ°å„ªç§€æ°´å¹³
- âœ… CK é æ¸¬ç²¾æº–

**ä»éœ€æ”¹é€²**ï¼š
- âš ï¸ L6D6 ä¿ƒé€²æ•ˆæ‡‰æœªå¯¦ç¾ï¼ˆæ ¸å¿ƒå•é¡Œï¼‰
- âš ï¸ é«˜åŠ‘é‡çµ„ç•¥æœ‰é«˜ä¼°

**å»ºè­°çš„ä¸‹ä¸€æ­¥**:
1. å˜—è©¦é™ä½ `base_anth_rate_light` (æœ€ç°¡å–®)
2. æˆ–èª¿æ•´æ—¥å…§éç·šæ€§åƒæ•¸
3. æˆ–è€ƒæ…®å¢åŠ æ¿€æ•ˆæ©Ÿåˆ¶ï¼ˆè¼ƒè¤‡é›œï¼‰

**v6.0 ç‚ºæœªä¾†çš„æ”¹é€²å¥ å®šäº†å …å¯¦çš„åŸºç¤ã€‚**
