# 萵苣UVA模型 - 專案總結與規劃

## 【第一階段: 專案全貌與新藍圖】

**專案全名**: 基於 Sun (2025) 模型的植物工廠萵苣生長模擬器開發與UVA效應整合研究
**更新日期**: 2025年12月11日
**研究者**: Gray
**AI協助**: Claude
**版本**: v5.6 (修復能力參數化)
**狀態**: ✅ 模型校準完成

---

## 📑 第一階段目錄

### 本階段內容
1. [執行摘要](#1-執行摘要)
2. [專案背景與動機](#2-專案背景與動機)
3. [核心研究問題](#3-核心研究問題)
4. [專案新藍圖：三階段執行計畫](#4-專案新藍圖三階段執行計畫)
5. [預期成就與突破](#5-預期成就與突破)
6. [下一階段預告](#6-下一階段預告)

---

# 1. 執行摘要

## 1.1 專案目標

本專案旨在開發一個高精度的萵苣生長動力學模型，該模型將首先在植物工廠環境下驗證，然後擴展以整合UVA光照對萵苣生長和花青素積累的雙重影響。最終目標是建立一個強大的模擬工具，用於預測並優化UVA處理策略，以在不犧牲產量的前提下，最大化紅萵苣的營養價值（花青素含量）。

## 1.2 當前成果 (v5.6)

**✅ 模型校準已完成！** 所有 6 個處理組的鮮重誤差均 < 5%：

| 處理組 | FW_sim | FW_exp | FW誤差 | Stress |
|--------|--------|--------|--------|--------|
| CK | 87.6g | 87.0g | +0.7% | 0.0 |
| L6D6 | 88.3g | 91.4g | -3.3% | 2.0 |
| L6D6-N | 81.4g | 80.8g | +0.8% | 4.8 |
| H12D3 | 62.5g | 60.6g | +3.1% | 36.1 |
| VL3D12 | 63.6g | 67.0g | -5.0% | 6.5 |
| L6D12 | 61.0g | 60.4g | +0.9% | 11.2 |

**統計指標**: Mean |FW_Err| = 2.3%, Max |FW_Err| = 5.0%

## 1.3 核心方法論

本專案採用分階段、由簡入繁的建模策略：

1.  **模型驗證**: ✅ 完整複製並驗證 **Sun et al. (2025)** 的萵苣生長模型
2.  **在地化校準**: ✅ 將模型參數調整為符合植物工廠環境（CK 組誤差 < 1%）
3.  **UVA效應整合**: ✅ 包含以下核心機制：
    - **UVA-PAR 即時增益**: 日間 UVA 提供額外光合能量
    - **Stress 損傷-修復動態**: 統一描述 UVA 造成的氧化脅迫
    - **LAI 依賴脆弱性**: 低 LAI（幼嫩植物）對 UVA 更脆弱
    - **日內照射非線性**: 超過 6h 後損傷效率急劇上升
    - **夜間節律抑制**: 夜間 UVA 損傷加成（circadian_disruption_factor = 2.0）
    - **碳依賴修復**: 修復能力與碳池狀態相關

## 1.4 已完成成果

- ✅ 經過完整驗證和在地化校準的萵苣生長 Python 模擬器（v5.6）
- ✅ 創新的 UVA 效應模型，整合 5 個狀態變量（X_d, C_buf, LAI, Anth, Stress）
- ✅ 所有參數都有實際使用，沒有硬編碼數值
- ✅ 清晰的專案文檔與程式碼同步

---

# 2. 專案背景與動機

## 2.1 產業挑戰：品質與產量的兩難

在受控環境農業（CEA）領域，特別是植物工廠中，標準LED照明雖然能高效促進作物生長，但因缺乏UV光譜，導致紅萵苣等作物的營養價值（如花青素）和色澤不足，市場價值降低。傳統上，添加UV光（特別是UVB）雖然能顯著提升花青素，卻往往以犧牲產量為代價，這形成了「生長-防禦權衡」的困境，阻礙了其商業化應用。

UVA光照提供了一個潛在的解決方案，它能在不嚴重損傷植物的前提下促進著色。然而，其背後的複雜機制——如何影響光合作用、如何觸發防禦反應、以及如何在這兩者之間分配資源——尚未被完全理解和量化。

## 2.2 科學缺口：從經驗到模型的跨越

現有研究多為經驗性的「試錯法」，缺乏一個能夠預測不同UVA策略效果的機制性模型。特別是，UVA對光合作用的潛在促進效應，以及它與花青素合成對內部碳資源的競爭關係，是當前研究的關鍵缺口。

本研究的動機正是要填補這一缺口，從複製一個成熟的基礎模型開始，逐步構建一個能夠精確描述植物工廠環境下，UVA光照如何調控萵苣生長與品質的數學模型。

---

# 3. 核心研究問題

本專案旨在回答以下核心問題：

1.  **模型驗證**: 我們能否在Python中精確複製Sun et al. (2025)的萵苣生長模型，並重現其模擬結果？
2.  **在地化校準**: 如何將通用模型調整為適用於我們特定植物工廠環境的精確預測工具？CK組的模擬鮮重能否與實際數據高度吻合？
3.  **UVA雙重效應建模**: 如何在一個統一的框架內，同時模擬UVA的**光合促進效應**（PAR增益）與其**胁迫损伤效應**？
4.  **非線性響應建模**: 如何解釋為何溫和的UVA處理（L6D6）與高強度的UVA處理（H12D3）會產生質變的結果？我們最终采用的**“标志触发式损伤”**是否是描述这种非线性的有效方法？
5.  **胁迫響應建模**: 如何模擬在高強度胁迫下，植物的**生长抑制**与**花青素超补偿合成**这两种现象的内在关联？

---

# 4. 專案新藍圖：三階段執行計畫

為了系統性地解決上述問題，我們規劃了以下三個緊密銜接的執行階段：

### **階段一：Sun (2025) 模型的複製與驗證 (P1)**

- **目標**: 建立一個功能正確、結果可信的基礎生長模型。
- **任務**:
    1.  **程式碼實現**: 在Python中，根據Sun et al. (2025)論文，完整實現其所有方程式和參數。
    2.  **參數複製**: 準確無誤地錄入論文中提供的所有參數。
    3.  **模擬驗證**: 運行模擬，並將結果與原論文中的圖表和數據進行比對，確保誤差在可接受範圍內。
- **產出**: 一個名為 `validate_sun_model.py` 的獨立腳本，專門用於此驗證任務。

### **階段二：植物工廠環境的校準 (P2)**

- **目標**: 使基礎模型能夠準確預測我們自己植物工廠中對照組萵苣的生長情況。
- **任務**:
    1.  **環境參數化**: 將`simulate_uva_model.py`中的環境參數（光照、溫度、CO2等）更新為我們植物工廠的實際測量值。
    2.  **CK組模擬**: 運行未使用UVA的對照組（CK）模擬。
    3.  **數據比對與校準**: 將模擬的最終鮮重與我們實驗室CK組的平均鮮重進行比較。如有顯著差異，微調模型中最敏感且不確定的參數（如初始乾重、部分轉換效率等），直到模擬結果與現實數據匹配。
- **產出**: 一個參數經過校準的 `simulate_uva_model.py` 腳本，其對CK組的預測是準確的。

### **階段三：UVA碳競爭模型的整合與優化 (P3)**

- **目標**: 開發並整合UVA效應模組，找到最佳處理參數。
- **任務**:
    1.  **UVA效應建模**:
        - **光合促進**: 建立一個函數，描述UVA如何根據其劑量可能地提升光合速率。
        - **花青素合成**: 建立另一個函數，描述UVA如何驅動花青素合成，並定義此過程消耗的碳水化合物量。
        - **碳競爭邏輯**: 在模型的ODE系統中，將光合作用產生的非結構性碳水化合物（Buffer）作為一個中心池，新生長和花青素合成均從此池中消耗資源，形成競爭關係。
    2.  **參數探索**: 基於文獻和實驗數據，為UVA模型設定合理的參數範圍。
    3.  **模擬優化**: 運行多組模擬，探索不同的UVA強度、時長和時機組合，尋找能夠最大化（鮮重 + w * 花青素含量）的組合，其中`w`是權重因子。
- **產出**:
    - `simulate_uva_model.py` 的最終版本，包含完整的UVA碳競爭模型。
    - 一份關於最佳UVA處理參數的建議報告。

---

# 5. 已完成成就

- ✅ **從理論到實踐**: 成功將 Sun et al. (2025) 萵苣生長模型轉化為植物工廠專用模擬器
- ✅ **機制性創新**: 提出並實現基於「Stress 損傷-修復」的 UVA 效應模型，包含：
  - LAI 脆弱性機制（解釋早期照射損傷）
  - 日內非線性因子（解釋 H12D3 高損傷）
  - 夜間節律抑制（解釋 L6D6-N 低鮮重）
  - 碳依賴修復（生物學合理的修復機制）
- ✅ **高精度校準**: Mean FW 誤差 2.3%, Max 5.0%，所有 6 組均達標
- ✅ **完整文檔**: 與程式碼同步的專案文檔

---

# 6. 檔案結構

| 檔案 | 版本 | 說明 |
|------|------|------|
| `simulate_uva_model.py` | v5.6 | 主模型 - 修復能力參數化 |
| `lettuce_uva_carbon_complete_model.py` | v7.1 | Sun 模型 - 支援 I_override |
| `model_config.py` | - | 共用設定模組 |
| `CLAUDE.md` | v1.0 | Claude 工作守則 |
| `MODEL_DESIGN_NOTES.md` | - | 模型設計筆記 |
| `HANDOFF_STATUS.md` | - | 交接狀態 |

---

# 7. 下一步待辦

1. **敏感度分析**: 測試關鍵參數的敏感度
2. **模型文件整理**: 準備論文用圖表和說明
3. **花青素校準優化**: 目前 Anth 誤差較大（Mean 15.6%），可考慮進一步優化
